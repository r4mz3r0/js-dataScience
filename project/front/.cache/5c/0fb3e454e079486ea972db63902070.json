{"id":"node_modules/vega-lite/build/src/compile/baseconcat.js","dependencies":[{"name":"/home/ramsiro/Desktop/JavaScriptDataScience/js-dataScience/project/front/node_modules/vega-lite/build/src/compile/baseconcat.js.map","includedInParent":true,"mtime":499162500000},{"name":"/home/ramsiro/Desktop/JavaScriptDataScience/js-dataScience/project/front/package.json","includedInParent":true,"mtime":1593715260815},{"name":"/home/ramsiro/Desktop/JavaScriptDataScience/js-dataScience/project/front/node_modules/vega-lite/build/package.json","includedInParent":true,"mtime":499162500000},{"name":"tslib","loc":{"line":3,"column":22},"parent":"/home/ramsiro/Desktop/JavaScriptDataScience/js-dataScience/project/front/node_modules/vega-lite/build/src/compile/baseconcat.js","resolved":"/home/ramsiro/Desktop/JavaScriptDataScience/js-dataScience/project/front/node_modules/tslib/tslib.es6.js"},{"name":"../util","loc":{"line":4,"column":21},"parent":"/home/ramsiro/Desktop/JavaScriptDataScience/js-dataScience/project/front/node_modules/vega-lite/build/src/compile/baseconcat.js","resolved":"/home/ramsiro/Desktop/JavaScriptDataScience/js-dataScience/project/front/node_modules/vega-lite/build/src/util.js"},{"name":"./data/parse","loc":{"line":5,"column":22},"parent":"/home/ramsiro/Desktop/JavaScriptDataScience/js-dataScience/project/front/node_modules/vega-lite/build/src/compile/baseconcat.js","resolved":"/home/ramsiro/Desktop/JavaScriptDataScience/js-dataScience/project/front/node_modules/vega-lite/build/src/compile/data/parse.js"},{"name":"./layoutsize/assemble","loc":{"line":6,"column":25},"parent":"/home/ramsiro/Desktop/JavaScriptDataScience/js-dataScience/project/front/node_modules/vega-lite/build/src/compile/baseconcat.js","resolved":"/home/ramsiro/Desktop/JavaScriptDataScience/js-dataScience/project/front/node_modules/vega-lite/build/src/compile/layoutsize/assemble.js"},{"name":"./model","loc":{"line":7,"column":22},"parent":"/home/ramsiro/Desktop/JavaScriptDataScience/js-dataScience/project/front/node_modules/vega-lite/build/src/compile/baseconcat.js","resolved":"/home/ramsiro/Desktop/JavaScriptDataScience/js-dataScience/project/front/node_modules/vega-lite/build/src/compile/model.js"}],"generated":{"js":"\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar util_1 = require(\"../util\");\nvar parse_1 = require(\"./data/parse\");\nvar assemble_1 = require(\"./layoutsize/assemble\");\nvar model_1 = require(\"./model\");\nvar BaseConcatModel = /** @class */ (function (_super) {\n    tslib_1.__extends(BaseConcatModel, _super);\n    function BaseConcatModel(spec, parent, parentGivenName, config, repeater, resolve) {\n        return _super.call(this, spec, parent, parentGivenName, config, repeater, resolve) || this;\n    }\n    BaseConcatModel.prototype.parseData = function () {\n        this.component.data = parse_1.parseData(this);\n        this.children.forEach(function (child) {\n            child.parseData();\n        });\n    };\n    BaseConcatModel.prototype.parseSelection = function () {\n        var _this = this;\n        // Merge selections up the hierarchy so that they may be referenced\n        // across unit specs. Persist their definitions within each child\n        // to assemble signals which remain within output Vega unit groups.\n        this.component.selection = {};\n        var _loop_1 = function (child) {\n            child.parseSelection();\n            util_1.keys(child.component.selection).forEach(function (key) {\n                _this.component.selection[key] = child.component.selection[key];\n            });\n        };\n        for (var _i = 0, _a = this.children; _i < _a.length; _i++) {\n            var child = _a[_i];\n            _loop_1(child);\n        }\n    };\n    BaseConcatModel.prototype.parseMarkGroup = function () {\n        for (var _i = 0, _a = this.children; _i < _a.length; _i++) {\n            var child = _a[_i];\n            child.parseMarkGroup();\n        }\n    };\n    BaseConcatModel.prototype.parseAxisAndHeader = function () {\n        for (var _i = 0, _a = this.children; _i < _a.length; _i++) {\n            var child = _a[_i];\n            child.parseAxisAndHeader();\n        }\n        // TODO(#2415): support shared axes\n    };\n    BaseConcatModel.prototype.assembleSelectionTopLevelSignals = function (signals) {\n        return this.children.reduce(function (sg, child) { return child.assembleSelectionTopLevelSignals(sg); }, signals);\n    };\n    BaseConcatModel.prototype.assembleSelectionSignals = function () {\n        this.children.forEach(function (child) { return child.assembleSelectionSignals(); });\n        return [];\n    };\n    BaseConcatModel.prototype.assembleLayoutSignals = function () {\n        return this.children.reduce(function (signals, child) {\n            return signals.concat(child.assembleLayoutSignals());\n        }, assemble_1.assembleLayoutSignals(this));\n    };\n    BaseConcatModel.prototype.assembleSelectionData = function (data) {\n        return this.children.reduce(function (db, child) { return child.assembleSelectionData(db); }, data);\n    };\n    BaseConcatModel.prototype.assembleMarks = function () {\n        // only children have marks\n        return this.children.map(function (child) {\n            var title = child.assembleTitle();\n            var style = child.assembleGroupStyle();\n            var layoutSizeEncodeEntry = child.assembleLayoutSize();\n            return tslib_1.__assign({ type: 'group', name: child.getName('group') }, (title ? { title: title } : {}), (style ? { style: style } : {}), (layoutSizeEncodeEntry ? {\n                encode: {\n                    update: layoutSizeEncodeEntry\n                }\n            } : {}), child.assembleGroup());\n        });\n    };\n    return BaseConcatModel;\n}(model_1.Model));\nexports.BaseConcatModel = BaseConcatModel;\n"},"sourceMaps":{"js":{"version":3,"file":"baseconcat.js","sourceRoot":"","sources":["../../../src/compile/baseconcat.ts"],"names":[],"mappings":"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","sourcesContent":["import {Config} from '../config';\nimport {Resolve} from '../resolve';\nimport {BaseSpec} from '../spec';\nimport {keys} from '../util';\nimport {VgData, VgSignal} from '../vega.schema';\nimport {parseData} from './data/parse';\nimport {assembleLayoutSignals} from './layoutsize/assemble';\nimport {Model} from './model';\nimport {RepeaterValue} from './repeater';\n\nexport abstract class BaseConcatModel extends Model {\n  constructor(spec: BaseSpec, parent: Model, parentGivenName: string, config: Config, repeater: RepeaterValue, resolve: Resolve) {\n    super(spec, parent, parentGivenName, config, repeater, resolve);\n  }\n\n  public parseData() {\n    this.component.data = parseData(this);\n    this.children.forEach((child) => {\n      child.parseData();\n    });\n  }\n  public parseSelection() {\n    // Merge selections up the hierarchy so that they may be referenced\n    // across unit specs. Persist their definitions within each child\n    // to assemble signals which remain within output Vega unit groups.\n    this.component.selection = {};\n    for (const child of this.children) {\n      child.parseSelection();\n      keys(child.component.selection).forEach((key) => {\n        this.component.selection[key] = child.component.selection[key];\n      });\n    }\n  }\n\n  public parseMarkGroup() {\n    for (const child of this.children) {\n      child.parseMarkGroup();\n    }\n  }\n\n  public parseAxisAndHeader() {\n    for (const child of this.children) {\n      child.parseAxisAndHeader();\n    }\n\n    // TODO(#2415): support shared axes\n  }\n\n  public assembleSelectionTopLevelSignals(signals: any[]): VgSignal[] {\n    return this.children.reduce((sg, child) => child.assembleSelectionTopLevelSignals(sg), signals);\n  }\n\n  public assembleSelectionSignals(): VgSignal[] {\n    this.children.forEach((child) => child.assembleSelectionSignals());\n    return [];\n  }\n\n  public assembleLayoutSignals(): VgSignal[] {\n    return this.children.reduce((signals, child) => {\n      return signals.concat(child.assembleLayoutSignals());\n    }, assembleLayoutSignals(this));\n  }\n\n  public assembleSelectionData(data: VgData[]): VgData[] {\n    return this.children.reduce((db, child) => child.assembleSelectionData(db), data);\n  }\n\n  public assembleMarks(): any[] {\n    // only children have marks\n    return this.children.map(child => {\n      const title = child.assembleTitle();\n      const style = child.assembleGroupStyle();\n      const layoutSizeEncodeEntry = child.assembleLayoutSize();\n      return {\n        type: 'group',\n        name: child.getName('group'),\n        ...(title ? {title} : {}),\n        ...(style ? {style} : {}),\n        ...(layoutSizeEncodeEntry ? {\n          encode: {\n            update: layoutSizeEncodeEntry\n          }\n        } : {}),\n        ...child.assembleGroup()\n      };\n    });\n  }\n}\n"]}},"error":null,"hash":"80a445ef9d433ab811769f1b23e7cc6d","cacheData":{"env":{}}}